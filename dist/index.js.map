{"version":3,"sources":["utils.js","Mode.js","fullscreen-patcher.js","styles.js","commands-list.js","Command.js","index.js"],"names":["log","args","console","apply","runInWindow","str","script","document","createElement","innerText","body","appendChild","setTimeout","removeChild","prevent","e","stopPropagation","preventDefault","stopImmediatePropagation","isAnyMetaKey","altKey","ctrlKey","metaKey","shiftKey","isOnInput","target","includes","tagName","MODES","DEFAULT","REPLY","Mode","mode","onChangeEvents","interval","intervalDelay","setMode","startTimer","getCurrentMode","forEach","event","toolbar","querySelector","classList","contains","fn","push","setInterval","newMode","clearInterval","el","className","toLowerCase","click","styles","innerHTML","selector","check","parentElement","remove","requestAnimationFrame","TOOLBAR_COMMANDS","KeyA","KeyS","KeyD","KeyF","KeyG","KeyZ","KeyX","OBJECT_COMMANDS","KeyQ","UI_COMMANDS","code","REPLY_COMMANDS","Commands","onKeyDown","bind","window","addEventListener","match","checkDigit","checkElementsToolbar","checkObjectCommands","checkUiCommands","checkReplyCommands","index","replace","elem","children","Object","entries","cmd","btn","removeEventListener","command","Command","onChange"],"mappings":"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","file":"index.js","sourceRoot":"../src","sourcesContent":["export const log = (...args) => {\n  console.log.apply(console, ['\\x1b[34m%s\\x1b[0m', `--> [TW Utilities]`, ...args]);\n};\n\nexport const runInWindow = (str) => {\n  const script = document.createElement('script');\n  script.innerText = str;\n  document.body.appendChild(script);\n\n  setTimeout(() => {\n    document.body.removeChild(script);\n  }, 400);\n};\n\nexport const prevent = (e) => {\n  e.stopPropagation();\n  e.preventDefault();\n  e.stopImmediatePropagation();\n};\n\nexport const isAnyMetaKey = (e) => e.altKey || e.ctrlKey || e.metaKey || e.shiftKey;\n\nexport const isOnInput = (e) => e.target && ['INPUT', 'TEXTAREA'].includes(e.target.tagName);\n","export const MODES = {\n  DEFAULT: 'DEFAULT',\n  REPLY: 'REPLY',\n};\n\nclass Mode {\n  constructor() {\n    this.mode = null;\n    this.onChangeEvents = [];\n    this.interval = null;\n    this.intervalDelay = 200;\n\n    this.setMode();\n    this.startTimer();\n  }\n\n  setMode(mode) {\n    this.mode = mode || this.getCurrentMode();\n\n    this.onChangeEvents.forEach((event) => event(this.mode));\n\n    return this.mode;\n  }\n\n  getCurrentMode() {\n    const toolbar = document.querySelector('.tv-replay-toolbar');\n\n    if (toolbar && !toolbar.classList.contains('i-hidden')) {\n      return MODES.REPLY;\n    } else {\n      return MODES.DEFAULT;\n    }\n  }\n\n  onChange(fn) {\n    this.onChangeEvents.push(fn);\n  }\n\n  startTimer() {\n    this.interval = setInterval(() => {\n      const newMode = this.getCurrentMode();\n\n      if (this.mode === MODES.DEFAULT && newMode === MODES.REPLY) {\n        this.setMode(MODES.REPLY);\n      }\n\n      if (this.mode === MODES.REPLY && newMode === MODES.DEFAULT) {\n        this.setMode(MODES.DEFAULT);\n      }\n    }, this.intervalDelay);\n  }\n\n  destroy() {\n    clearInterval(this.interval);\n  }\n}\n\nexport default new Mode();\n","let interval = setInterval(() => {\n  const el = document.querySelector('div[data-name=\"fullscreen\"]');\n\n  if (!el) {\n    return;\n  }\n\n  clearInterval(interval);\n\n  if (el && !el.className.toLowerCase().includes('isactive')) {\n    el.click(0);\n  }\n}, 20);\n","const styles = `\n#overlap-manager-root [data-id=\"Change Interval\"],\n#overlap-manager-root [data-name=\"load-layout-dialog\"]\n{\n  display: none !important;\n}\n`;\n\nconst el = document.createElement('style');\nel.innerHTML = styles;\n\ndocument.body.appendChild(el);\n\n// Patch for KeyW (. on dvorak)\n(() => {\n  const selector = '[data-name=\"load-layout-dialog\"]';\n\n  function check() {\n    const el = document.querySelector(selector);\n\n    if (el) {\n      console.log('removed');\n      el.parentElement.parentElement.parentElement.remove();\n    }\n\n    requestAnimationFrame(check);\n  }\n\n  check();\n})();\n","import { isAnyMetaKey, runInWindow } from './utils';\n\nexport const TOOLBAR_COMMANDS = {\n  // Horizontal line\n  KeyA: '.tv-floating-toolbar__widget:nth-child(1) span',\n  // Horizontal ray\n  KeyS: '.tv-floating-toolbar__widget:nth-child(2) span',\n  // Rectangle\n  KeyD: '.tv-floating-toolbar__widget:nth-child(3) span',\n  // Expanded channel\n  KeyF: '.tv-floating-toolbar__widget:nth-child(4) span',\n  // Vertical line\n  KeyG: '.tv-floating-toolbar__widget:nth-child(5) span',\n  // Ray\n  KeyZ: '.tv-floating-toolbar__widget:nth-child(6) span',\n  // Trend line\n  KeyX: '.tv-floating-toolbar__widget:nth-child(7) span',\n};\n\nexport const OBJECT_COMMANDS = {\n  KeyQ: '[data-name=\"remove\"]',\n};\n\nexport const UI_COMMANDS = [\n  // Reset scale\n  {\n    check: (e) => e.code === 'KeyR' && !isAnyMetaKey(e),\n    fn: () => document.querySelector('.chart-container.active .js-btn-group-reset-scale > div').click(),\n  },\n\n  // Remove all shapes\n  {\n    check: (e) => e.code === 'KeyQ' && e.shiftKey,\n    fn: () => runInWindow('TradingViewApi.activeChart().removeAllShapes()'),\n  },\n];\n\nexport const REPLY_COMMANDS = [\n  {\n    check: (e) => e.code === 'KeyW' && !isAnyMetaKey(e),\n    fn: () => document.querySelector(`.tv-floating-toolbar.tv-replay-toolbar .tv-floating-toolbar__widget:nth-child(1) > div`).click(),\n  },\n  {\n    check: (e) => e.code === 'KeyE' && !isAnyMetaKey(e),\n    fn: () => document.querySelector(`.tv-floating-toolbar.tv-replay-toolbar .tv-floating-toolbar__widget:nth-child(3) > div`).click(),\n  },\n  {\n    check: (e) => e.code === 'KeyT' && !isAnyMetaKey(e),\n    fn: () => document.querySelector(`.tv-floating-toolbar.tv-replay-toolbar .tv-floating-toolbar__widget:nth-child(2) > div`).click(),\n  },\n];\n","import { prevent, isAnyMetaKey, isOnInput } from './utils';\nimport { log } from './utils';\nimport { TOOLBAR_COMMANDS, OBJECT_COMMANDS, UI_COMMANDS, REPLY_COMMANDS } from './commands-list';\nimport { MODES } from './Mode';\n\nexport default class Commands {\n  constructor(mode) {\n    this.mode = mode;\n    this.onKeyDown = this.onKeyDown.bind(this);\n\n    window.addEventListener('keydown', this.onKeyDown, false);\n  }\n\n  setMode(mode) {\n    this.mode = mode;\n  }\n\n  onKeyDown(e) {\n    // Skip input\n    if (isOnInput(e)) {\n      return;\n    }\n\n    if (e.code.match('Digit') && !isAnyMetaKey(e)) {\n      this.checkDigit(e);\n    }\n\n    this.checkElementsToolbar(e);\n    this.checkObjectCommands(e);\n    this.checkUiCommands(e);\n\n    if (this.mode === MODES.REPLY) {\n      this.checkReplyCommands(e);\n    }\n  }\n\n  checkDigit(e) {\n    prevent(e);\n\n    if (!document.querySelector('#header-toolbar-intervals')) {\n      return log('#header-toolbar-intervals not found');\n    }\n\n    const index = e.code.replace('Digit', '');\n    const elem = document.querySelector('#header-toolbar-intervals').children[index - 1];\n\n    if (!elem) {\n      return log('Element was not found', index);\n    }\n\n    elem.click();\n  }\n\n  checkElementsToolbar(e) {\n    Object.entries(TOOLBAR_COMMANDS).forEach((cmd) => {\n      if (e.code === cmd[0] && !isAnyMetaKey(e)) {\n        prevent(e);\n\n        const btn = document.querySelector(`.tv-floating-toolbar ${cmd[1]}`);\n        btn && btn.click();\n      }\n    });\n  }\n\n  checkObjectCommands(e) {\n    Object.entries(OBJECT_COMMANDS).forEach((cmd) => {\n      if (e.code === cmd[0] && !isAnyMetaKey(e)) {\n        prevent(e);\n\n        const btn = document.querySelector(`.tv-floating-toolbar.tv-linetool-properties-toolbar .tv-floating-toolbar__widget ${cmd[1]}`);\n        btn && btn.click();\n      }\n    });\n  }\n\n  checkUiCommands(e) {\n    UI_COMMANDS.forEach((cmd) => {\n      if (cmd.check(e)) {\n        prevent(e);\n        cmd.fn();\n      }\n    });\n  }\n\n  checkReplyCommands(e) {\n    REPLY_COMMANDS.forEach((cmd) => {\n      if (cmd.check(e)) {\n        prevent(e);\n        cmd.fn();\n      }\n    });\n  }\n\n  destroy() {\n    window.removeEventListener('keydown', this.onKeyDown, false);\n  }\n}\n","import { log } from './utils';\nimport Mode from './Mode';\nimport './fullscreen-patcher';\nimport './styles';\nimport Command from './Command';\n\nwindow.addEventListener('load', () => {\n  log('Current MODE:', Mode.getCurrentMode());\n\n  const command = new Command(Mode.getCurrentMode());\n\n  Mode.onChange((mode) => {\n    log('Changed MODE to', mode);\n    command.setMode(mode);\n  });\n});\n"]}